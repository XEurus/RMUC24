# RMUC24

### 介绍
2024 江苏大学哨兵 省赛程序
基于T265和2D激光雷达 使用T265作为视觉里程计
使用这套方案的主要原因是当时只有这些（看菜下饭属于是）
项目本身也是网上找开源七拼八凑起来的

其实只是2023赛季屎山的完善和延续啦
完善了一下上个赛季临场写的狗屁逻辑
乱七八糟的文件架构还是依旧乱七八糟
因为一些原因 嗯 到此为止了
要是大佬看到这个狗屁程序 别笑 哈哈哈哈哈哈哈
也许适合一些新加入的队伍快速动起来 就是搭积木
不过文件乱成这样 对新手来说很折磨 不建议看这堆垃圾

其实，程序还是个半成品吧。但是已经没有去完善的想法了。
看到这里的家人们 我只能说 2.7.3真的很重要。
现在发现已经太迟了。
### 软件架构
软件架构说明
1. 仿真 RMUC24_simulation
		mowen文件夹是其他比赛官方程序的小车 懒得做车了拿过来用了哈哈哈哈
		fp_sim里是主要程序文件 
		script里还有腹死胎中的全向感知方案
			原本的方案是做一个二级控制 低帧率的感知配合高帧率自瞄 可以在不改动自瞄和电控的情况下做全向感知
		backup里面有上赛季乱七八糟的备份
		world里能用的是20245.world文件 需要更改一下文件内stl的路径 之后就能用了应该
	   
2. 实际使用的程序 RMUC24_real
   sensor_interface:传感器相关驱动包 有我用过的各种雷达驱动 还有一些其他的相关程序 比如键盘控制和点云转换
   
   nav:主要程序文件
		script：各个版本的串口通信和决策杂糅在一起的程序，都已经没有使用了。还有一个比较好用的键盘控制程序。
		config：里面乱的要死 都是cartographer各个版本的lua配置参数 有纯激光雷达的 也有带imu和里程计的 *导航参数不在里面*
		launch：导航请看f3_move_base.launch 建图请看real_carto_开头的文件 LDS是激光雷达启动文件 ~~有个t265.launch被一股脑丢到2023_launch里面了 拿出来就好 我懒得弄了~~
		teb：teb_local_planner导航参数。导航卡的话主要调节Optimization内参数。当前前提是膨胀之类的没问题。
		msg：和自瞄同学约定的通信格式。

3. decision_script: 决策与串口通信 
		决策过于简单，就是 看到人就打 然后 可以按时间点去地图上某个点
		5.py版本中导航点发布存在问题，请改成使用多进程，将串口数据使用队列发给导航点决策进程。当前版本导航使用了阻塞，无法放到主函数内执行。或者将主函数while内导航点发布函数去除。
		55.py中按照上述思路修正了该问题，但是没测过~~（没想到吧）~~
		由于和电控约定的是发送才会回我裁判系统消息，导致有些混乱。最好的方法是上位机直接读裁判系统之后使用ros发布裁判系统消息。
   
### 安装教程
放到src里编译即可。
```shell
mkdir -p work_space_name/src
cd ws/src
git clone https://gitee.com/E_urus/RMUC24.git
cd ..
catkin build
source devel setup.bash
```

### 使用说明
启动仿真 目前使用省赛地图 里面也有区域赛地图
```shell
roslaunch fp_sim 2024runc_sim.launch
```
启动导航
```shell
roslaunch fp_sim move2.launch
```

实体哨兵导航程序
```shell
roslaunch nav f3move_base.launch
```